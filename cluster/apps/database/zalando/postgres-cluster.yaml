---
apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: homelab-pgsql
  namespace: database
spec:
  teamId: "homelab"
  volume:
    size: 10Gi
    storageClass: nfs-postgres
  numberOfInstances: 1
  allowedSourceRanges:
    - "0.0.0.0/0"
  postgresql:
    version: "15"
    parameters:
      shared_preload_libraries: 'bg_mon,pg_stat_statements,pgextwlist,pg_auth_mon,set_user,vectors'
  users:
    operator:
      - superuser
      - createdb
    vaultwarden: []
    firefly: []
    homeassistant: []
    keycloak: []
    authelia: []
    coder: []
    sftpgo: []
    photoview: []
    immich: []
    prowlarr: []
    radarr: []
  databases:
    vaultwarden: vaultwarden
    firefly: firefly
    homeassistant: homeassistant
    keycloak: keycloak
    authelia: authelia
    coder: coder
    sftpgo: sftpgo
    photoview: photoview
    immich: immich
    prowlarr: prowlarr
    prowlarr_log: prowlarr
    radarr: radarr
    radarr_log: radarr
  enableMasterLoadBalancer: true
  enableConnectionPooler: false
  enableLogicalBackup: true
